(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{179:function(e,t,n){},180:function(e,t,n){},258:function(e,t,n){"use strict";n.r(t);var a,r=n(8),s=n(0),c=n.n(s),i=n(28),o=n.n(i),l=(n(179),n(31)),d=n.n(l),j=n(51),u=n(45),b=(n(180),n(59)),p=n(26),O=n(37),h=n(90),x=n(53),v=n(34),m=n(267),f=n(264),y=n(265),T={labelCol:{span:8},wrapperCol:{span:16}},E={wrapperCol:{offset:8,span:16}},k=function(e){var t=e.user,n=e.setUser,a=e.setToken,c=(e.token,Object(s.useState)(!1)),i=Object(u.a)(c,2),o=i[0],l=i[1],b=Object(s.useState)({}),k=Object(u.a)(b,2),C=k[0],g=k[1],w=(Object(p.g)(),function(){var e=Object(j.a)(d.a.mark((function e(t){var a,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new Headers).append("Content-Type","application/json"),e.next=4,fetch("/login",{method:"POST",body:JSON.stringify(t),headers:a});case 4:return r=e.sent,e.next=7,r.json();case 7:if("Email no existe, desea crear una cuenta nueva?"!==(s=e.sent).error){e.next=11;break}return g(t),e.abrupt("return",N());case 11:S(t),s&&!s.error&&n&&n(s);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());function S(e){return I.apply(this,arguments)}function I(){return(I=Object(j.a)(d.a.mark((function e(t){var n,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new Headers).append("Content-Type","application/json"),e.next=5,fetch("/auth",{method:"POST",body:JSON.stringify({username:t.email,password:t.password}),headers:n});case 5:return r=e.sent,e.next=8,r.json();case 8:s=e.sent,a(s.access_token),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}var N=function(){l(!0)},A=function(){var e=Object(j.a)(d.a.mark((function e(){var t,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!1),(t=new Headers).append("Content-Type","application/json"),e.next=5,fetch("/register",{method:"POST",body:JSON.stringify(C),headers:t});case 5:return a=e.sent,e.next=8,a.json();case 8:(r=e.sent)&&!r.error&&n&&(n(r),S(C));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?Object(r.jsx)(h.a,{className:"mt-4",children:Object(r.jsx)(x.a,{span:12,offset:6,children:Object(r.jsx)(v.a,{type:"primary",htmlType:"submit",onClick:function(){n&&n(void 0)},children:"Cerrar Sesi\xf3n"})})}):Object(r.jsxs)(h.a,{className:"mt-4",children:[Object(r.jsx)(m.a,{title:"Crear Cuenta",visible:o,onOk:A,onCancel:function(){l(!1)},children:Object(r.jsx)("p",{children:"Email No Existe Desea Crear Una Nueva Cuenta"})}),Object(r.jsx)(x.a,{span:12,offset:6,children:Object(r.jsxs)(f.a,Object(O.a)(Object(O.a)({},T),{},{name:"basic",onFinish:w,onFinishFailed:function(e){console.error("Failed:",e)},children:[Object(r.jsx)(f.a.Item,{label:"Correo",name:"email",rules:[{required:!0,message:"Please input your username!"}],children:Object(r.jsx)(y.a,{})}),Object(r.jsx)(f.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(r.jsx)(y.a.Password,{})}),Object(r.jsx)(f.a.Item,Object(O.a)(Object(O.a)({},E),{},{children:Object(r.jsx)(v.a,{type:"primary",htmlType:"submit",children:"Submit"})}))]}))})]})},C=n(261),g=n(164),w=n(101),S=n(262),I=w.a.Option,N=S.a.RangePicker,A={labelCol:{span:8},wrapperCol:{span:16}},D={required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},_=function(e){var t=e.setEvents,n=e.method,a=e.endpoint,s=(e.event,e.setEvent),c=e.user,i=(e.setUser,e.token);e.setToken;function o(){return(o=Object(j.a)(d.a.mark((function e(r){var c,o,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=new Headers).append("Content-Type","application/json"),c.append("Authorization","JWT ".concat(i)),console.log(r),e.prev=4,e.next=7,fetch(a,{method:n,body:JSON.stringify(r),headers:c});case 7:return o=e.sent,e.next=10,o.json();case 10:l=e.sent,s&&s(l),t&&t((function(e){return[].concat(Object(g.a)(e),[l])})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,15]])})))).apply(this,arguments)}var l=function(e){var t="".concat(e.startEndDate[0]._d),n="".concat(e.startEndDate[1]._d),a=(null===e||void 0===e?void 0:e.category)?e.category:"Conferencia",r=(null===e||void 0===e?void 0:e.online)?e.online:"Conferencia";!function(e){o.apply(this,arguments)}({name:e.name,category:a,place:e.place,address:e.address,start_date:t,end_date:n,online:r,user:null===c||void 0===c?void 0:c.id})};return Object(r.jsxs)(f.a,Object(O.a)(Object(O.a)({},A),{},{name:"nest-messages",onFinish:function(e){return l(e)},validateMessages:D,children:[Object(r.jsx)(f.a.Item,{name:"name",label:"Nombre",rules:[{required:!0}],children:Object(r.jsx)(y.a,{})}),Object(r.jsx)(f.a.Item,{name:"category",label:"Categor\xeda",rules:[{required:!0}],children:Object(r.jsxs)(w.a,{style:{width:120},children:[Object(r.jsx)(I,{value:"",children:"-Escoge una opci\xf3n-"}),Object(r.jsx)(I,{value:"Conferencia",children:"Conferencia"}),Object(r.jsx)(I,{value:"Seminario",children:"Seminario"}),Object(r.jsx)(I,{value:"Congreso",children:"Congreso"}),Object(r.jsx)(I,{value:"Curso",children:"Curso"})]})}),Object(r.jsx)(f.a.Item,{name:"place",label:"Place",rules:[{required:!0}],children:Object(r.jsx)(y.a,{})}),Object(r.jsx)(f.a.Item,{name:"address",label:"Direcci\xf3n",rules:[{required:!0}],children:Object(r.jsx)(y.a,{})}),Object(r.jsx)(f.a.Item,{name:"startEndDate",label:"Fecha",rules:[{required:!0}],children:Object(r.jsx)(N,{})}),Object(r.jsx)(f.a.Item,{name:"online",label:"Presencialidad",rules:[{required:!0}],children:Object(r.jsxs)(w.a,{style:{width:120},children:[Object(r.jsx)(I,{value:"",children:"-Escoge una opci\xf3n-"}),Object(r.jsx)(I,{value:"Virtual",children:"Virtual"}),Object(r.jsx)(I,{value:"Presencial",children:"Presencial"})]})}),Object(r.jsx)(f.a.Item,{wrapperCol:Object(O.a)(Object(O.a)({},A.wrapperCol),{},{offset:8}),children:Object(r.jsx)(v.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))};!function(e){e.NAME="name",e.CATEGORY="category",e.PLACE="place",e.ADDRESS="address",e.START_DATE="start_date",e.END_DATE="end_date",e.ONLINE="online",e.ID="id",e.FRONT_ID="front_id"}(a||(a={}));var P=[{title:a.NAME.toUpperCase(),dataIndex:a.NAME,key:a.FRONT_ID,render:function(e,t){return Object(r.jsx)(b.b,{to:"/events/".concat(t.id),children:e})}},{title:a.CATEGORY.toUpperCase(),dataIndex:a.CATEGORY,key:a.CATEGORY},{title:a.START_DATE.toUpperCase(),dataIndex:a.START_DATE,key:a.START_DATE},{title:a.ONLINE.toUpperCase(),dataIndex:a.ONLINE,key:a.ONLINE}],q=function(e){var t=e.user,n=e.setUser,a=e.events,i=e.setEvents,o=e.token,l=e.setToken,d=Object(s.useState)(P),j=Object(u.a)(d,2),b=j[0];j[1];return Object(r.jsxs)(c.a.Fragment,{children:[Object(r.jsx)(h.a,{className:"mt-4",children:Object(r.jsx)(_,{method:"POST",endpoint:"/events",setEvents:i,user:t,setUser:n,token:o,setToken:l})}),Object(r.jsx)(h.a,{children:Object(r.jsx)(x.a,{span:24,children:Object(r.jsx)(C.a,{dataSource:a,columns:b})})})]})},R=n(263),U=n(266),J=n(268),F=n(270),H=R.a.Meta,L=function(e){var t=e.setEvents,n=e.token,a=e.setToken,c=Object(p.h)().idEvent,i=Object(p.g)(),o=Object(s.useState)(void 0),l=Object(u.a)(o,2),b=l[0],O=l[1];Object(s.useEffect)((function(){function e(){return(e=Object(j.a)(d.a.mark((function e(){var t,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Headers).append("Authorization","JWT ".concat(n)),e.next=4,fetch("/events/".concat(c),{headers:t});case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,O(r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}try{!function(){e.apply(this,arguments)}()}catch(t){O(void 0)}}),[]);return void 0===b&&U.a,null===b?Object(r.jsx)("div",{children:"El evento actual no existe, regresa aqu\xed"}):Object(r.jsxs)(h.a,{className:"mt-4",children:[Object(r.jsx)(x.a,{offset:6,children:Object(r.jsx)(R.a,{style:{width:300,marginTop:16},actions:[Object(r.jsx)(F.a,{onClick:function(){var e=new Headers;e.append("Authorization","JWT ".concat(n)),fetch("/events/".concat(c),{method:"DELETE",headers:e}),t((function(e){return e.filter((function(e){var t;return(null!==(t=null===e||void 0===e?void 0:e.id)&&void 0!==t?t:"")!==c}))})),O(void 0),i.push("/events")}},"delete")],children:Object(r.jsxs)(U.a,{loading:void 0===b,avatar:!0,active:!0,children:[Object(r.jsx)(H,{avatar:Object(r.jsx)(J.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:null===b||void 0===b?void 0:b.name,description:null===b||void 0===b?void 0:b.category}),Object(r.jsx)("p",{children:null===b||void 0===b?void 0:b.place}),Object(r.jsx)("p",{children:null===b||void 0===b?void 0:b.address}),Object(r.jsx)("p",{children:null===b||void 0===b?void 0:b.start_date}),Object(r.jsx)("p",{children:null===b||void 0===b?void 0:b.end_date}),Object(r.jsx)("p",{children:null===b||void 0===b?void 0:b.online})]})})}),Object(r.jsx)(x.a,{children:Object(r.jsx)(_,{method:"PUT",endpoint:"/events/".concat(c),event:b,token:n,setToken:a,setEvent:O})})]})},z=n(76),M=n(168),$=function(e){var t=e.component,n=e.isSignedIn,a=Object(M.a)(e,["component","isSignedIn"]);return Object(r.jsx)(p.b,Object(O.a)(Object(O.a)({},a),{},{render:function(e){return n?Object(r.jsx)(t,Object(O.a)({},e)):Object(r.jsx)(p.a,{to:{pathname:"/",state:{from:e.location}}})}}))};var Y=function(){var e=Object(s.useState)(),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(""),i=Object(u.a)(c,2),o=i[0],l=i[1],O=Object(s.useState)([]),h=Object(u.a)(O,2),x=h[0],v=h[1],m=Object(s.useState)(!1),f=Object(u.a)(m,2),y=f[0];function T(){return(T=Object(j.a)(d.a.mark((function e(t){var n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Headers,console.log(o),n.append("Authorization","JWT ".concat(o)),e.next=5,fetch("/events?email=".concat(t),{headers:n});case 5:return a=e.sent,e.next=8,a.json();case 8:(r=e.sent)&&!r.error&&v(r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return f[1],Object(s.useEffect)((function(){n&&n.email&&function(e){T.apply(this,arguments)}(n.email)}),[o]),Object(r.jsxs)(b.a,{children:[Object(r.jsxs)(z.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"],children:[Object(r.jsx)(z.a.Item,{children:Object(r.jsx)(b.b,{to:"/",children:n?n.email:"Login"})},"1"),!!n&&Object(r.jsxs)(z.a.Item,{children:[" ",Object(r.jsx)(b.b,{to:(null===n||void 0===n?void 0:n.id)?"/events":"/",children:"Events"})]},"2")]}),Object(r.jsxs)(p.d,{children:[Object(r.jsx)(p.b,{path:"/",exact:!0,component:function(){return Object(r.jsx)(k,{token:o,setToken:l,user:n,setUser:a})}}),Object(r.jsx)($,{path:"/events",exact:!0,isSignedIn:y||!!n,component:function(){return Object(r.jsx)(q,{events:x,setEvents:v,user:n,setUser:a,token:o,setToken:l})}}),Object(r.jsx)($,{isSignedIn:y||!!n,path:"/events/:idEvent",exact:!0,component:function(){return Object(r.jsx)(L,{token:o,setToken:l,setEvents:v})}})]})]})},G=(n(256),n(257),n(269));o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(G.a,{children:Object(r.jsx)(Y,{})})}),document.getElementById("root"))}},[[258,1,2]]]);
//# sourceMappingURL=main.205f1702.chunk.js.map